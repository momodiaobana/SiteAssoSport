{% extends 'base.html'%}
{% load static %}


{% block content %}
   <body>
      <head>
         <title>Accueil</title>
         <link rel="stylesheet" href="{% static 'css/accueil.css' %}">
         <script src="{% static 'scripts/accueil.js' %}"></script>
         <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
      </head>
      <div class="container">
         <h1>Chiffres en détail</h1>
         <!--chiffres en card -->
         <div class="row">
            <div class="col-sm-4">
               <div class="card text-bg-primary mb">
                  <div class="card-header"><strong>Total d'articles</strong> </div>
                  <div class="card-body">
                     <h5 class="card-title">{{ count_all_items }}</h5>
                  </div>
               </div>
            </div>

            <div class="col-sm-4">
               <div class="card text-bg-success mb-3">
                  <div class="card-header"><strong>Prix moyen des articles(€)</strong></div>
                  <div class="card-body">
                     <h5 class="card-title">{{ prix_moyen }}</h5>
                  </div>
               </div>
            </div>

            <div class="col-sm-4">
               <div class="card text-bg-danger mb-3">
                  <div class="card-header"><strong>Valeur du stock(€)</strong></div>
                  <div class="card-body">
                     <h5 class="card-title">{{ valeur_totale_stock }} </h5>
                  </div>
               </div>
            </div>

         </div>

         <!-- chartJS -->
         <div class="graphe">
            <h1>Quantité d'articles par catégorie</h1>
            <div>
               <canvas id="myChart"></canvas>
            </div>
            <script class="bar">
               generateBarChart({{count_boxe_items}}, {{count_foot_items}}, {{count_basket_items}}) 
            </script>
         </div>

         <!-- chartJS -->
         <div class="tableau">
            <table class="table table-striped">
               <thead class="thead-dark">
                  <tr>
                     <th scope="col">#</th>
                     <th scope="col">Nom</th>
                     <th scope="col">prix</th>
                     <th scope="col">catégorie</th>
                     <th scope="col">Description</th>
                  </tr>
               </thead>
               <tbody class="bodytab">
                  {% for item in items %}
                     <tr>
                        <th scope="row">{{ item.id }}</th>
                        <td>{{ item.nomProduit }}</td>
                        <td>{{ item.prix}} €</td>
                        <td>{{ item.cProduit}}</td>
                        <td>{{ item.description}}</td>
                     </tr>
                  {% endfor %}
               </tbody>
            </table>
         </div>
         <h1>Valeur de chaque catégorie</h1>
         <div class="cercle">
            <div>
               <canvas id="myChart2"></canvas>
            </div>
            <script class="pie">
               generatePieChart({{valeur_stock_boxe}}, {{valeur_stock_foot}}, {{valeur_stock_basket}}) 
            </script>
         </div>
      </div>
   </body>
{% endblock %}
